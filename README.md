# Document WIP

# Introduction
Antithesis is a third-party vendor with an environment capable of performing network fuzzing. We can upload images containing docker-compose.yml files, which represent various Filecoin node setups, to the Antithesis Docker registry. Antithesis runs docker-compose up from these images to spin up a network of different Filecoin nodes in their environment and execute a test suite. Network fuzzing is performed on the network while the test suite runs, and a report is generated by Antithesis identifying bugs. 

# Overview
This setup is creating a local Filecoin network for testing and development purposes. It includes multiple components: Drand (for randomness), Lotus nodes (Filecoin implementation), and Forest (an alternative Filecoin implementation), Curio(TBD). The system is designed to create a controlled environment where Filecoin transactions can be simulated and tested.

# Patch Files:
1. lotus.patch: Modifies the Lotus implementation to use local Drand servers instead of public ones. Reads Drand chain information from an environment variable, allowing for custom configuration.
2. forest.patch: Similar to the Lotus patch, it modifies the Forest implementation to use local Drand servers. Reads Drand chain information from a file specified by an environment variable.

These patches allow the Filecoin nodes to work with a local, controlled source of randomness instead of relying on public Drand servers.

# Docker Compose:

### drand-1, drand-2, drand-3:
These are local Drand nodes that provide randomness to the Filecoin network.
They replace the public Drand servers used in a real Filecoin network.
lotus-1:
This is the primary Lotus node, acting as the leader in the network.
It initializes the genesis block and sets up the initial state of the blockchain.
forest-1:
This is a Forest node, an alternative implementation of the Filecoin protocol.
It connects to the Lotus network to validate and process transactions.

### Lotus Node (lotus-1):

1. Role in the Network: The Lotus node (lotus-1) serves as the primary node in this local Filecoin network.
It acts as both a full node and a miner in this setup.

2. Initialization(Ref: https://lotus.filecoin.io/lotus/developers/local-network/): The Lotus node is responsible for initializing the genesis block of the local Filecoin network.
It uses a pre-generated genesis file (localnet.json) which defines the initial state of the blockchain.

### Forest Node 
TBD

### Curio Node
TBD

### Workload (fil_spammer_rpc2.py):
The workload script simulates activity on the Filecoin network:
It waits for the network to initialize.
Connects to the Lotus node (lotus-1) using RPC.
Creates multiple wallets.
Transfers initial funds from a genesis wallet to these new wallets.
Starts spamming the network with transactions between these wallets.
The script includes features like:
Creating multiple wallets
Transferring funds between wallets
Estimating gas for transactions
Intentionally introducing some faulty transactions (with incorrect gas values) to test network resilience



